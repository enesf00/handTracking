"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="undefined"!=typeof self?self:{};function e(e,n){t:{for(var r=["CLOSURE_FLAGS"],i=t,o=0;o<r.length;o++)if(null==(i=i[r[o]])){r=null;break t}r=i}return null!=(e=r&&r[e])?e:n}function n(){throw Error("Invalid UTF8")}function r(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}let i,o;const s="undefined"!=typeof TextDecoder;let a;const u="undefined"!=typeof TextEncoder;function c(t){if(u)t=(a||=new TextEncoder).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(128>e)r[n++]=e;else{if(2048>e)r[n++]=e>>6|192;else{if(55296<=e&&57343>=e){if(56319>=e&&i<t.length){const o=t.charCodeAt(++i);if(56320<=o&&57343>=o){e=1024*(e-55296)+o-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var l,h=e(610401301,!1),f=e(572417392,e(1,!0));const d=t.navigator;function g(t){return!!h&&(!!l&&l.brands.some((({brand:e})=>e&&-1!=e.indexOf(t))))}function p(e){var n;return(n=t.navigator)&&(n=n.userAgent)||(n=""),-1!=n.indexOf(e)}function m(){return!!h&&(!!l&&0<l.brands.length)}function y(){return m()?g("Chromium"):(p("Chrome")||p("CriOS"))&&!(!m()&&p("Edge"))||p("Silk")}l=d&&d.userAgentData||null;var v=!m()&&(p("Trident")||p("MSIE"));!p("Android")||y(),y(),p("Safari")&&(y()||!m()&&p("Coast")||!m()&&p("Opera")||!m()&&p("Edge")||(m()?g("Microsoft Edge"):p("Edg/"))||m()&&g("Opera"));var b={},w=null;function _(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=w[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}A();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function A(){if(!w){w={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));b[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===w[o]&&(w[o]=i)}}}}var S="undefined"!=typeof Uint8Array,E=!v&&"function"==typeof btoa;function T(t){if(!E){var e;void 0===e&&(e=0),A(),e=b[e];var n=Array(Math.floor(t.length/3)),r=e[64]||"";let u=0,c=0;for(;u<t.length-2;u+=3){var i=t[u],o=t[u+1],s=t[u+2],a=e[i>>2];i=e[(3&i)<<4|o>>4],o=e[(15&o)<<2|s>>6],s=e[63&s],n[c++]=a+i+o+s}switch(a=0,s=r,t.length-u){case 2:s=e[(15&(a=t[u+1]))<<2]||r;case 1:t=t[u],n[c]=e[t>>2]+e[(3&t)<<4|a>>4]+s+r}return n.join("")}for(e="",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const x=/[-_.]/g,I={"-":"+",_:"/",".":"="};function P(t){return I[t]||""}function O(t){if(!E)return _(t);x.test(t)&&(t=t.replace(x,P)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function L(t){return S&&null!=t&&t instanceof Uint8Array}let B;function F(){return B||=new Uint8Array(0)}var j={};let k;function U(t){if(t!==j)throw Error("illegal external caller")}function V(){return k||=new N(null,j)}function C(t){U(j);var e=t.F;return null==(e=null==e||L(e)?e:"string"==typeof e?O(e):null)?e:t.F=e}var N=class{constructor(t,e){if(U(e),this.F=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}O(){const t=C(this);return t?new Uint8Array(t):F()}};function M(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function G(){return Error("Failed to read varint, encoding is invalid.")}function D(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function z(t){return 0==t.length?V():new N(t,j)}function $(t){if("string"==typeof t)return{buffer:O(t),B:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),B:!1};if(t.constructor===Uint8Array)return{buffer:t,B:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),B:!1};if(t.constructor===N)return{buffer:C(t)||F(),B:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),B:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}var R=!f;let W=!f;const H="function"==typeof Uint8Array.prototype.slice;let q,J=0,K=0;function X(t){const e=0>t;let n=(t=Math.abs(t))>>>0;if(t=Math.floor((t-n)/4294967296),e){const[e,r]=nt(n,t);t=r,n=e}J=n>>>0,K=t>>>0}function Y(t){const e=q||=new DataView(new ArrayBuffer(8));e.setFloat32(0,+t,!0),K=0,J=e.getUint32(0,!0)}function Q(t,e){return 4294967296*e+(t>>>0)}function Z(t,e){const n=2147483648&e;return n&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),t=Q(t,e),n?-t:t}function tt(t){return t=String(t),"0000000".slice(t.length)+t}function et(t){if(16>t.length)X(Number(t));else if("function"==typeof BigInt)t=BigInt(t),J=Number(t&BigInt(4294967295))>>>0,K=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+("-"===t[0]);K=J=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const e=Number(t.slice(r,i));K*=1e6,J=1e6*J+e,4294967296<=J&&(K+=Math.trunc(J/4294967296),K>>>=0,J>>>=0)}if(e){const[t,e]=nt(J,K);J=t,K=e}}}function nt(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function rt(t,e,{G:n=!1}={}){t.G=n,e&&(e=$(e),t.j=e.buffer,t.o=e.B,t.H=0,t.m=t.j.length,t.g=t.H)}function it(t,e){if(t.g=e,e>t.m)throw D(t.m,e)}function ot(t,e){let n,r=0,i=0,o=0;const s=t.j;let a=t.g;do{n=s[a++],r|=(127&n)<<o,o+=7}while(32>o&&128&n);for(32<o&&(i|=(127&n)>>4),o=3;32>o&&128&n;o+=7)n=s[a++],i|=(127&n)<<o;if(it(t,a),128>n)return e(r>>>0,i>>>0);throw G()}function st(t){let e=0,n=t.g;const r=n+10,i=t.j;for(;n<r;){const r=i[n++];if(e|=r,0==(128&r))return it(t,n),!!(127&e)}throw G()}function at(t,e){if(0>e)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.m)throw D(e,t.m-n);return t.g=r,n}function ut(t,e){if(0==e)return V();var n=at(t,e);return t.G&&t.o?n=t.j.subarray(n,n+e):(t=t.j,n=n===(e=n+e)?F():H?t.slice(n,e):new Uint8Array(t.subarray(n,e))),z(n)}var ct=class{constructor(t,e){this.j=null,this.o=!1,this.g=this.m=this.H=0,rt(this,t,e)}clear(){this.j=null,this.o=!1,this.g=this.m=this.H=0,this.G=!1}i(){const t=this.j;let e=this.g,n=t[e++],r=127&n;if(128&n&&(n=t[e++],r|=(127&n)<<7,128&n&&(n=t[e++],r|=(127&n)<<14,128&n&&(n=t[e++],r|=(127&n)<<21,128&n&&(n=t[e++],r|=n<<28,128&n&&128&t[e++]&&128&t[e++]&&128&t[e++]&&128&t[e++]&&128&t[e++])))))throw G();return it(this,e),r}v(){var t=this.j;const e=this.g;var n=t[e],r=t[e+1],i=t[e+2];return t=t[e+3],it(this,this.g+4),n=2*((i=(n<<0|r<<8|i<<16|t<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,255==r?i?NaN:1/0*n:0==r?n*Math.pow(2,-149)*i:n*Math.pow(2,r-150)*(i+Math.pow(2,23))}V(){return this.i()}},lt=[];function ht(t){var e=t.g;if(e.g==e.m)return!1;t.j=t.g.g;var n=t.g.i()>>>0;if(e=n>>>3,!(0<=(n&=7)&&5>=n))throw M(n,t.j);if(1>e)throw Error(`Invalid field number: ${e} (at position ${t.j})`);return t.m=e,t.i=n,!0}function ft(t){switch(t.i){case 0:0!=t.i?ft(t):st(t.g);break;case 1:it(t=t.g,t.g+8);break;case 2:if(2!=t.i)ft(t);else{var e=t.g.i()>>>0;it(t=t.g,t.g+e)}break;case 5:it(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!ht(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.i){if(t.m!=e)throw Error("Unmatched end-group tag");break}ft(t)}break;default:throw M(t.i,t.j)}}function dt(t,e,n){const r=t.g.m,i=t.g.i()>>>0,o=t.g.g+i;let s=o-r;if(0>=s&&(t.g.m=o,n(e,t,void 0,void 0,void 0),s=o-t.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-s} bytes, either the data ended unexpectedly or the message misreported its own length`);t.g.g=o,t.g.m=r}function gt(t){var e=t.g.i()>>>0,a=at(t=t.g,e);if(t=t.j,s){var u,c=t;(u=o)||(u=o=new TextDecoder("utf-8",{fatal:!0})),t=a+e,c=0===a&&t===c.length?c:c.subarray(a,t);try{var l=u.decode(c)}catch(t){if(void 0===i){try{u.decode(new Uint8Array([128]))}catch(t){}try{u.decode(new Uint8Array([97])),i=!0}catch(t){i=!1}}throw!i&&(o=void 0),t}}else{e=(l=a)+e,a=[];let i,o=null;for(;l<e;){var h=t[l++];128>h?a.push(h):224>h?l>=e?n():(i=t[l++],194>h||128!=(192&i)?(l--,n()):a.push((31&h)<<6|63&i)):240>h?l>=e-1?n():(i=t[l++],128!=(192&i)||224===h&&160>i||237===h&&160<=i||128!=(192&(c=t[l++]))?(l--,n()):a.push((15&h)<<12|(63&i)<<6|63&c)):244>=h?l>=e-2?n():(i=t[l++],128!=(192&i)||0!=i-144+(h<<28)>>30||128!=(192&(c=t[l++]))||128!=(192&(u=t[l++]))?(l--,n()):(h=(7&h)<<18|(63&i)<<12|(63&c)<<6|63&u,h-=65536,a.push(55296+(h>>10&1023),56320+(1023&h)))):n(),8192<=a.length&&(o=r(o,a),a.length=0)}l=r(o,a)}return l}function pt(t){const e=t.g.i()>>>0;return ut(t.g,e)}function mt(t,e,n){var r=t.g.i()>>>0;for(r=t.g.g+r;t.g.g<r;)n.push(e.call(t.g))}var yt=[];function vt(t){return t?/^\d+$/.test(t)?(et(t),new bt(J,K)):null:wt||=new bt(0,0)}var bt=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let wt;function _t(t){return t?/^-?\d+$/.test(t)?(et(t),new At(J,K)):null:St||=new At(0,0)}var At=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let St;function Et(t,e,n){for(;0<n||127<e;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function Tt(t,e){for(;127<e;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function xt(t,e){if(0<=e)Tt(t,e);else{for(let n=0;9>n;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function It(t){var e=J;t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function Pt(t,e){0!==e.length&&(t.j.push(e),t.i+=e.length)}function Ot(t,e,n){Tt(t.g,8*e+n)}function Lt(t,e){return Ot(t,e,2),e=t.g.end(),Pt(t,e),e.push(t.i),e}function Bt(t,e){var n=e.pop();for(n=t.i+t.g.length()-n;127<n;)e.push(127&n|128),n>>>=7,t.i++;e.push(n),t.i++}function Ft(t,e,n){Ot(t,e,2),Tt(t.g,n.length),Pt(t,t.g.end()),Pt(t,n)}class jt{constructor(t,e,n,r){this.g=t,this.i=e,this.j=n,this.M=r}}function kt(t){return Array.prototype.slice.call(t)}const Ut="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;var Vt=Ut?(t,e)=>{t[Ut]|=e}:(t,e)=>{void 0!==t.u?t.u|=e:Object.defineProperties(t,{u:{value:e,configurable:!0,writable:!0,enumerable:!1}})};function Ct(t){const e=Gt(t);1!=(1&e)&&(Object.isFrozen(t)&&(t=kt(t)),zt(t,1|e))}var Nt=Ut?(t,e)=>{t[Ut]&=~e}:(t,e)=>{void 0!==t.u&&(t.u&=~e)};function Mt(t,e,n){return n?t|e:t&~e}var Gt=Ut?t=>0|t[Ut]:t=>0|t.u,Dt=Ut?t=>t[Ut]:t=>t.u,zt=Ut?(t,e)=>{t[Ut]=e}:(t,e)=>{void 0!==t.u?t.u=e:Object.defineProperties(t,{u:{value:e,configurable:!0,writable:!0,enumerable:!1}})};function $t(){var t=[];return Vt(t,1),t}function Rt(t,e){zt(e,-14591&(0|t))}function Wt(t,e){zt(e,-14557&(34|t))}function Ht(t){return 0===(t=t>>14&1023)?536870912:t}var qt={},Jt={};function Kt(t){return!(!t||"object"!=typeof t||t.W!==Jt)}function Xt(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}let Yt=!f;function Qt(t,e,n){if(null!=t)if("string"==typeof t)t=t?new N(t,j):V();else if(t.constructor!==N)if(L(t))t=n?z(t):t.length?new N(new Uint8Array(t),j):V();else{if(!e)throw Error();t=void 0}return t}function Zt(t,e,n){if(!Array.isArray(t)||t.length)return!1;const r=Gt(t);return!!(1&r)||!(!e||!(Array.isArray(e)?e.includes(n):e.has(n)))&&(zt(t,1|r),!0)}var te;const ee=[];function ne(t){if(2&t)throw Error()}let re,ie;function oe(t,e){(e=re?e[re]:void 0)&&(t[re]=kt(e))}function se(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function ae(t){return null==t?t:"number"==typeof t||"NaN"===t||"Infinity"===t||"-Infinity"===t?Number(t):void 0}function ue(t){if(null!=t){if("boolean"!=typeof t){var e=typeof t;throw Error(`Expected boolean but got ${"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}: ${t}`)}t=!!t}return t}zt(ee,55),te=Object.freeze(ee);const ce=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function le(t){const e=typeof t;return"number"===e?Number.isFinite(t):"string"===e&&ce.test(t)}function he(t){if(null==t)return t;if("string"==typeof t){if(!t)return;t=+t}return"number"==typeof t?t:void 0}function fe(t){return Math.trunc(t)}function de(t){var e=Math.trunc(Number(t));return Number.isSafeInteger(e)?String(e):(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),t)}function ge(t){if("string"!=typeof t)throw Error();return t}function pe(t){if(null!=t&&"string"!=typeof t)throw Error();return t}function me(t){return null==t||"string"==typeof t?t:void 0}function ye(t,e,n){if(null!=t&&"object"==typeof t&&t.D===qt)return t;if(Array.isArray(t)){var r=Gt(t),i=r;return 0===i&&(i|=32&n),(i|=2&n)!==r&&zt(t,i),new e(t)}}let ve,be,we;function _e(t){switch(typeof t){case"boolean":return be||=[0,void 0,!0];case"number":return 0<t?void 0:0===t?we||=[0,void 0]:[-t,void 0];case"string":return[0,t];case"object":return t}}function Ae(t,e,n){if(null==t&&(t=ve),ve=void 0,null==t){var r=96;n?(t=[n],r|=512):t=[],e&&(r=-16760833&r|(1023&e)<<14)}else{if(!Array.isArray(t))throw Error();if(64&(r=Gt(t)))return ie&&delete t[ie],t;if(r|=64,n&&(r|=512,n!==t[0]))throw Error();t:{if(n=r,r=t.length){const i=r-1;if(Xt(t[i])){if(1024<=(e=i-(+!!(512&(n|=256))-1)))throw Error();r=-16760833&n|(1023&e)<<14;break t}}if(e){if(1024<(e=Math.max(e,r-(+!!(512&n)-1))))throw Error();r=-16760833&n|(1023&e)<<14}else r=n}}return zt(t,r),t}function Se(t,e,n,r,i,o){if(null!=t){if(Array.isArray(t))t=i&&0==t.length&&1&Gt(t)?void 0:o&&2&Gt(t)?t:Ee(t,e,n,void 0!==r,i,o);else if(Xt(t)){const s={};for(let a in t)s[a]=Se(t[a],e,n,r,i,o);t=s}else t=e(t,r);return t}}function Ee(t,e,n,r,i,o){const s=r||n?Gt(t):0;r=r?!!(32&s):void 0;const a=kt(t);for(let t=0;t<a.length;t++)a[t]=Se(a[t],e,n,r,i,o);return n&&(oe(a,t),n(s,a)),a}function Te(t){return t.D===qt?t.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"boolean":return t?1:0;case"object":if(t){if(Array.isArray(t))return Yt||!Zt(t,void 0,9999)?t:void 0;if(L(t))return T(t);if(t instanceof N){const e=t.F;return null==e?"":"string"==typeof e?e:t.F=T(e)}}}return t}(t)}function xe(t,e,n=Wt){if(null!=t){if(S&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=Gt(t);return 2&r?t:(e&&=0===r||!!(32&r)&&!(64&r||!(16&r)),e?(zt(t,-12293&(34|r)),t):Ee(t,xe,4&r?Wt:n,!0,!1,!0))}return t.D===qt&&(n=t.l,t=2&(r=Dt(n))?t:Pe(t,n,r,!0)),t}}function Ie(t){const e=t.l;return Pe(t,e,Dt(e),!1)}function Pe(t,e,n,r){return t=t.constructor,ve=e=Oe(e,n,r),e=new t(e),ve=void 0,e}function Oe(t,e,n){const r=n||2&e?Wt:Rt,i=!!(32&e);return t=function(t,e,n){const r=kt(t);var i=r.length;const o=256&e?r[i-1]:void 0;for(i+=o?-1:0,e=512&e?1:0;e<i;e++)r[e]=n(r[e]);if(o){e=r[e]={};for(const t in o)e[t]=n(o[t])}return oe(r,t),r}(t,e,(t=>xe(t,i,r))),Vt(t,32|(n?2:0)),t}function Le(t){const e=t.l,n=Dt(e);return 2&n?Pe(t,e,n,!1):t}function Be(t,e){return Fe(t=t.l,Dt(t),e)}function Fe(t,e,n,r){if(-1===n)return null;if(n>=Ht(e)){if(256&e)return t[t.length-1][n]}else{var i=t.length;if(r&&256&e&&null!=(r=t[i-1][n]))return r;if((e=n+(+!!(512&e)-1))<i)return t[e]}}function je(t,e,n,r){const i=t.l;let o=Dt(i);return ne(o),ke(i,o,e,n,r),t}function ke(t,e,n,r,i){var o=Ht(e);if(n>=o||i){if(i=e,256&e)o=t[t.length-1];else{if(null==r)return i;o=t[o+(+!!(512&e)-1)]={},i|=256}return o[n]=r,i!==e&&zt(t,i),i}return t[n+(+!!(512&e)-1)]=r,256&e&&(n in(t=t[t.length-1])&&delete t[n]),e}function Ue(t,e,n,r,i){var o=2&e;let s=Fe(t,e,n,i);Array.isArray(s)||(s=te);const a=!(2&r);r=!(1&r);const u=!!(32&e);let c=Gt(s);return 0!==c||!u||o||a?1&c||(c|=1,zt(s,c)):(c|=33,zt(s,c)),o?(t=!1,2&c||(Vt(s,34),t=!!(4&c)),(r||t)&&Object.freeze(s)):(o=!!(2&c)||!!(2048&c),r&&o?(s=kt(s),r=1,u&&!a&&(r|=32),zt(s,r),ke(t,e,n,s,i)):a&&32&c&&!o&&Nt(s,32)),s}function Ve(t){t=t.l;let e=Dt(t);const n=Fe(t,e,1),r=Qt(n,!0,!!(34&e));return null!=r&&r!==n&&ke(t,e,1,r),r}function Ce(t,e,n){t=t.l;let r=Dt(t);if(ne(r),null==n)ke(t,r,e);else{var i,o=Gt(n),s=o,a=!!(2&o)||Object.isFrozen(n);if((i=!a)&&(i=!1),!(4&o)){o=21,a&&(n=kt(n),s=0,o=Xe(o,r,!0)),a=!!(4&o)&&!!(4096&o);for(let t=0;t<n.length;t++)n[t]=ge(n[t])}i&&(o=Mt(o,2,!0)),o!==s&&zt(n,o),i&&Object.freeze(n),ke(t,r,e,n)}}function Ne(t,e){t=t.l;let n=Dt(t);ne(n),ke(t,n,2,""===e?void 0:e)}function Me(t,e,n,r){const i=Dt(t);ne(i),t=Ue(t,i,e,2),r=n(r,!!(4&(e=Gt(t)))&&!!(4096&e)),t.push(r)}function Ge(t){return t}function De(t,e){return ze(t=t.l,Dt(t),Wr)===e?e:-1}function ze(t,e,n){let r=0;for(let i=0;i<n.length;i++){const o=n[i];null!=Fe(t,e,o)&&(0!==r&&(e=ke(t,e,r)),r=o)}return r}function $e(t,e,n,r){let i=Dt(t);ne(i);const o=Fe(t,i,n,r);let s;if(null!=o&&o.D===qt)return(e=Le(o))!==o&&ke(t,i,n,e,r),e.l;if(Array.isArray(o)){const t=Gt(o);s=2&t?Oe(o,t,!1):o,s=Ae(s,e[0],e[1])}else s=Ae(void 0,e[0],e[1]);return s!==o&&ke(t,i,n,s,r),s}function Re(t,e,n,r){t=t.l;let i=Dt(t);const o=Fe(t,i,n,r);return(e=ye(o,e,i))!==o&&null!=e&&ke(t,i,n,e,r),e}function We(t,e,n){if(null==(e=Re(t,e,n,!1)))return e;t=t.l;let r=Dt(t);if(!(2&r)){const i=Le(e);i!==e&&ke(t,r,n,e=i,!1)}return e}function He(t,e,n,r,i,o){const s=1===r;r=2===r,i=!!i;var a=!!(2&e)&&r;let u=Ue(t,e,1,3);e=Dt(t);var c=Gt(u),l=!!(2&c);const h=!!(4&c),f=!!(32&c);let d=l&&h||!!(2048&c);if(!h){var g,p=u,m=e;(g=!!(2&c))&&(m=Mt(m,2,!0));let t=!g,r=!0,i=0,o=0;for(;i<p.length;i++){const e=ye(p[i],n,m);if(e instanceof n){if(!g){const n=!!(2&Gt(e.l));t&&=!n,r&&=n}p[o++]=e}}o<i&&(p.length=o),c=Mt(c,4,!0),c=Mt(c,16,r),c=Mt(c,8,t),zt(p,c),l&&!a&&(Object.freeze(u),d=!0)}if(n=c,a=!!(8&c)||s&&!u.length,o&&!a){for(d&&(u=kt(u),d=!1,n=0,c=Xe(c,e,i),e=ke(t,e,1,u)),o=u,a=c,l=0;l<o.length;l++)(p=o[l])!==(c=Le(p))&&(o[l]=c);a=Mt(a,8,!0),c=a=Mt(a,16,!o.length)}return d||(s?c=Mt(c,!u.length||16&c&&(!h||f)?2:2048,!0):i||(c=Mt(c,32,!1)),c!==n&&zt(u,c),s&&(Object.freeze(u),d=!0)),r&&d&&(u=kt(u),c=Xe(c,e,i),zt(u,c),ke(t,e,1,u)),u}function qe(t,e){t=t.l;const n=Dt(t),r=!!(2&n);return He(t,n,e,r?1:2,!1,!r)}function Je(t,e,n,r,i){return null==r&&(r=void 0),je(t,n,r,i)}function Ke(t,e,n){var r=Zr;null==n&&(n=void 0),t=t.l;let i=Dt(t);ne(i),(r=ze(t,i,r))&&r!==e&&null!=n&&(i=ke(t,i,r)),ke(t,i,e,n)}function Xe(t,e,n){return t=Mt(t,2,!!(2&e)),t=Mt(t,32,!!(32&e)&&n),Mt(t,2048,!1)}function Ye(t,e){var n=xr;t=t.l;const r=Dt(t);ne(r),t=He(t,r,n,2),e=null!=e?e:new n,t.push(e),2&Gt(e.l)?Nt(t,8):Nt(t,16)}function Qe(t){return t=null==(t=Be(t,2))?t:le(t)?"number"==typeof t?fe(t):de(t):void 0}function Ze(t){return t??0}function tn(t,e,n){Me(t.l,e,ge,n)}function en(t,e,n){e.g?e.j(t,e.g,e.i,n,!0):e.j(t,e.i,n,!0)}Object.freeze({});var nn=class{constructor(t,e){this.l=Ae(t,e)}toJSON(){return rn(this,Ee(this.l,Te,void 0,void 0,!1,!1),!0)}B(){return!!(2&Gt(this.l))}};function rn(t,e,n){const r=t.constructor.A;var i=Dt(n?t.l:e),o=Ht(i),s=!1;if(r&&Yt){if(!n){var a;if((e=kt(e)).length&&Xt(a=e[e.length-1]))for(s=0;s<r.length;s++)if(r[s]>=o){Object.assign(e[e.length-1]={},a);break}s=!0}var u;o=e,n=!n,t=Ht(a=Dt(t.l)),a=+!!(512&a)-1;for(let e=0;e<r.length;e++){var c=r[e];if(c<t){var l=o[c+=a];null==l?o[c]=n?te:$t():n&&l!==te&&Ct(l)}else{if(!u){var h=void 0;o.length&&Xt(h=o[o.length-1])?u=h:o.push(u={})}l=u[c],null==u[c]?u[c]=n?te:$t():n&&l!==te&&Ct(l)}}}if(!(u=e.length))return e;let f,d;if(Xt(h=e[u-1])){t:{var g=h;for(var p in o={},n=!1,g)t=g[p],Array.isArray(t)&&(a=t,(!W&&Zt(t,r,+p)||!R&&Kt(t)&&0===t.size)&&(t=null),t!=a&&(n=!0)),null!=t?o[p]=t:n=!0;if(n){for(let t in o){g=o;break t}g=null}}g!=h&&(f=!0),u--}for(i=+!!(512&i)-1;0<u&&(null==(h=e[p=u-1])||!W&&Zt(h,r,p-i)||!R&&Kt(h)&&0===h.size);u--)d=!0;return f||d?(e=s?e:Array.prototype.slice.call(e,0,u),s&&(e.length=u),g&&e.push(g),e):e}function on(t){return Array.isArray(t)?t[0]instanceof jt?t:[Zn,t]:[t,void 0]}function sn(t,e){if(Array.isArray(e)){var n=Gt(e);if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const n=t(e[r]);null!=n&&(e[i++]=n)}return i<r&&(e.length=i),zt(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}nn.prototype.D=qt,nn.prototype.toString=function(){return rn(this,this.l,!1).toString()};const an=Symbol();function un(t){let e=t[an];if(!e){const n=pn(t),r=In(t),i=r.g;e=i?(t,e)=>i(t,e,r):(t,e)=>{for(;ht(e)&&4!=e.i;){var i=e.m,o=r[i];if(!o){var s=r.J;s&&(s=s[i])&&(o=r[i]=cn(s))}o&&o(e,t,i)||(i=(o=e).j,ft(o),o.I?o=void 0:(s=o.g.g-i,o.g.g=i,o=ut(o.g,s)),i=t,o&&(re||=Symbol(),(s=i[re])?s.push(o):i[re]=[o]))}n===ln||n===hn||n.T||(t[ie||=Symbol()]=n)},t[an]=e}return e}function cn(t){const e=(t=on(t))[0].g;if(t=t[1]){const n=un(t),r=In(t).C;return(t,i,o)=>e(t,i,o,r,n)}return e}let ln,hn;const fn=Symbol();function dn(t,e,n){const r=n[1];let i;if(r){const n=r[fn];i=n?n.C:_e(r[0]),t[e]=n??r}i&&i===be?(t.K||(t.K=[])).push(e):n[0]&&(t.L||(t.L=[])).push(e)}function gn(t,e){return[t.j,!e||0<e[0]?void 0:e]}function pn(t){var e=t[fn];if(e)return e;if(!(e=yn(t,t[fn]={},gn,gn,dn)).L&&!e.K){let n=!0;for(let t in e){isNaN(t)||(n=!1);break}n?(e=_e(t[0])===be,e=t[fn]=e?hn||={C:_e(!0)}:ln||={}):e.T=!0}return e}function mn(t,e,n){t[e]=n}function yn(t,e,n,r,i=mn){e.C=_e(t[0]);let o=0;var s=t[++o];s&&s.constructor===Object&&(e.J=s,"function"==typeof(s=t[++o])&&(e.g=s,e.i=t[++o],s=t[++o]));const a={};for(;Array.isArray(s)&&"number"==typeof s[0]&&0<s[0];){for(var u=0;u<s.length;u++)a[s[u]]=s;s=t[++o]}for(u=1;void 0!==s;){let h;"number"==typeof s&&(u+=s,s=t[++o]);var c=void 0;if(s instanceof jt?h=s:(h=tr,o--),h.M){s=t[++o],c=t;var l=o;"function"==typeof s&&(s=s(),c[l]=s),c=s}for(l=u+1,"number"==typeof(s=t[++o])&&0>s&&(l-=s,s=t[++o]);u<l;u++){const t=a[u];i(e,u,c?r(h,c,t):n(h,t))}}return e}const vn=Symbol();function bn(t){let e=t[vn];if(!e){const n=Sn(t);e=(t,e)=>On(t,e,n),t[vn]=e}return e}const wn=Symbol();function _n(t){return t.i}function An(t,e){let n,r;const i=t.i;return(t,o,s)=>i(t,o,s,r||=Sn(e).C,n||=bn(e))}function Sn(t){let e=t[wn];return e||(e=yn(t,t[wn]={},_n,An),En in t&&wn in t&&(t.length=0),e)}const En=Symbol();function Tn(t,e){const n=t.g;return e?(t,r,i)=>n(t,r,i,e):n}function xn(t,e,n){const r=t.g;let i,o;return(t,s,a)=>r(t,s,a,o||=In(e).C,i||=un(e),n)}function In(t){let e=t[En];return e||(pn(t),e=yn(t,t[En]={},Tn,xn),En in t&&wn in t&&(t.length=0),e)}function Pn(t,e){var n=t[e];if(n)return n;if((n=t.J)&&(n=n[e])){var r=(n=on(n))[0].i;if(n=n[1]){const e=bn(n),i=Sn(n).C;n=(n=t.i)?n(i,e):(t,n,o)=>r(t,n,o,i,e)}else n=r;return t[e]=n}}function On(t,e,n){for(var r=Dt(t),i=+!!(512&r)-1,o=t.length,s=512&r?1:0,a=o+(256&r?-1:0);s<a;s++){const r=t[s];if(null==r)continue;const o=s-i,a=Pn(n,o);a&&a(e,r,o)}if(256&r){r=t[o-1];for(let t in r)i=+t,Number.isNaN(i)||null!=(o=r[t])&&(a=Pn(n,i))&&a(e,o,i)}if(t=re?t[re]:void 0)for(Pt(e,e.g.end()),n=0;n<t.length;n++)Pt(e,C(t[n])||F())}function Ln(t,e){return new jt(t,e,!1,!1)}function Bn(t,e){return new jt(t,e,!0,!1)}function Fn(t,e,n){ke(t,Dt(t),e,n)}function jn(t,e,n){t:if(null!=e){if(le(e)){if("string"==typeof e){e=de(e);break t}if("number"==typeof e){e=fe(e);break t}}e=void 0}null!=e&&("string"==typeof e&&_t(e),null!=e&&(Ot(t,n,0),"number"==typeof e?(t=t.g,X(e),Et(t,J,K)):(n=_t(e),Et(t.g,n.i,n.g))))}function kn(t,e,n){null!=(e=he(e))&&null!=e&&(Ot(t,n,0),xt(t.g,e))}function Un(t,e,n){null!=(e=null==e?e:"boolean"==typeof e||"number"==typeof e?!!e:void 0)&&(Ot(t,n,0),t.g.g.push(e?1:0))}function Vn(t,e,n){null!=(e=me(e))&&Ft(t,n,c(e))}function Cn(t,e,n,r,i){null!=(e=e instanceof nn?e.l:Array.isArray(e)?Ae(e,r[0],r[1]):void 0)&&(n=Lt(t,n),i(e,t),Bt(t,n))}function Nn(t,e,n){null!=(e=null==e||"string"==typeof e||L(e)||e instanceof N?e:void 0)&&Ft(t,n,$(e).buffer)}var Mn,Gn=Ln((function(t,e,n){return 5===t.i&&(Fn(e,n,t.g.v()),!0)}),(function(t,e,n){null!=(e=ae(e))&&(Ot(t,n,5),t=t.g,Y(e),It(t))})),Dn=Bn((function(t,e,n){return(5===t.i||2===t.i)&&(e=Ue(e,Dt(e),n,2,!1),2==t.i?mt(t,ct.prototype.v,e):e.push(t.g.v()),!0)}),(function(t,e,n){if(null!=(e=sn(ae,e))&&e.length){Ot(t,n,2),Tt(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,Y(e[r]),It(n)}})),zn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,ot(t.g,Z)),!0)}),jn),$n=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,0===(t=ot(t.g,Z))?void 0:t),!0)}),jn),Rn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,ot(t.g,Q)),!0)}),(function(t,e,n){t:if(null!=e){if(le(e)){if("string"==typeof e){var r=Math.trunc(Number(e));if(Number.isSafeInteger(r))e=String(r);else{-1!==(r=e.indexOf("."))&&(e=e.substring(0,r)),et(e);var i=J;r=K,i>>>=0,2097151>=(r>>>=0)?e=""+(4294967296*r+i):"function"==typeof BigInt?e=""+(BigInt(r)<<BigInt(32)|BigInt(i)):(i=(16777215&i)+6777216*(e=16777215&(i>>>24|r<<8))+6710656*(r=r>>16&65535),e+=8147497*r,r*=2,1e7<=i&&(e+=Math.floor(i/1e7),i%=1e7),1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),e=r+tt(e)+tt(i))}break t}if("number"==typeof e){e=Math.trunc(e);break t}}e=void 0}null!=e&&("string"==typeof e&&vt(e),null!=e&&(Ot(t,n,0),"number"==typeof e?(t=t.g,X(e),Et(t,J,K)):(n=vt(e),Et(t.g,n.i,n.g))))})),Wn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,t.g.i()),!0)}),kn),Hn=Bn((function(t,e,n){return(0===t.i||2===t.i)&&(e=Ue(e,Dt(e),n,2,!1),2==t.i?mt(t,ct.prototype.i,e):e.push(t.g.i()),!0)}),(function(t,e,n){if(null!=(e=sn(he,e))&&e.length){n=Lt(t,n);for(let n=0;n<e.length;n++)xt(t.g,e[n]);Bt(t,n)}})),qn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,0===(t=t.g.i())?void 0:t),!0)}),kn),Jn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,st(t.g)),!0)}),Un),Kn=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,!1===(t=st(t.g))?void 0:t),!0)}),Un),Xn=Bn((function(t,e,n){return 2===t.i&&(Me(e,n,Ge,t=gt(t)),!0)}),(function(t,e,n){if(null!=(e=sn(me,e)))for(let i=0;i<e.length;i++){var r=e[i];null!=r&&Ft(t,n,c(r))}})),Yn=Ln((function(t,e,n){return 2===t.i&&(Fn(e,n,""===(t=gt(t))?void 0:t),!0)}),Vn),Qn=Ln((function(t,e,n){return 2===t.i&&(Fn(e,n,gt(t)),!0)}),Vn),Zn=new jt((function(t,e,n,r,i){return 2===t.i&&(dt(t,$e(e,r,n,!0),i),!0)}),Cn,!1,!0),tr=new jt((function(t,e,n,r,i){return 2===t.i&&(dt(t,$e(e,r,n),i),!0)}),Cn,!1,!0);Mn=new jt((function(t,e,n,r,i){if(2!==t.i)return!1;r=Ae(void 0,r[0],r[1]);let o=Dt(e);ne(o);let s=Ue(e,o,n,3);return o=Dt(e),4&Gt(s)&&(s=kt(s),zt(s,-2079&(1|Gt(s))),ke(e,o,n,s)),s.push(r),dt(t,r,i),!0}),(function(t,e,n,r,i){if(Array.isArray(e))for(let o=0;o<e.length;o++)Cn(t,e[o],n,r,i)}),!0,!0);var er=new jt((function(t,e,n,r,i,o){if(2!==t.i)return!1;let s=Dt(e);return ne(s),(o=ze(e,s,o))&&n!==o&&ke(e,s,o),dt(t,e=$e(e,r,n),i),!0}),Cn,!1,!0),nr=Ln((function(t,e,n){return 2===t.i&&(Fn(e,n,pt(t)),!0)}),Nn),rr=Ln((function(t,e,n){return 0===t.i&&(Fn(e,n,t.g.i()),!0)}),(function(t,e,n){null!=(e=he(e))&&(e=parseInt(e,10),Ot(t,n,0),xt(t.g,e))})),ir=Bn((function(t,e,n){return(0===t.i||2===t.i)&&(e=Ue(e,Dt(e),n,2,!1),2==t.i?mt(t,ct.prototype.V,e):e.push(t.g.i()),!0)}),(function(t,e,n){if(null!=(e=sn(he,e))&&e.length){n=Lt(t,n);for(let n=0;n<e.length;n++)xt(t.g,e[n]);Bt(t,n)}}));class or{constructor(t,e){this.i=t,this.g=e,this.j=Je,this.defaultValue=void 0}}function sr(t,e){return(n,r)=>{t:{if(yt.length){const t=yt.pop();t.s(r),rt(t.g,n,r),n=t}else n=new class{constructor(t,e){if(lt.length){const n=lt.pop();rt(n,t,e),t=n}else t=new ct(t,e);this.g=t,this.j=this.g.g,this.i=this.m=-1,this.s(e)}s({I:t=!1}={}){this.I=t}}(n,r);try{const r=new t,o=r.l;un(e)(o,n),ie&&delete o[ie];var i=r;break t}finally{n.g.clear(),n.m=-1,n.i=-1,100>yt.length&&yt.push(n)}i=void 0}return i}}var ar=[0,Yn,Ln((function(t,e,n){return 2===t.i&&(Fn(e,n,(t=pt(t))===V()?void 0:t),!0)}),(function(t,e,n){if(null!=e){if(e instanceof nn){const r=e.X;return void(r&&(e=r(e),null!=e&&Ft(t,n,$(e).buffer)))}if(Array.isArray(e))return}Nn(t,e,n)}))],ur=[0,Qn],cr=[0,Wn,rr,Jn,-1,Hn,rr,-1],lr=[0,Jn,-1],hr=class extends nn{constructor(){super()}};hr.A=[6];var fr=[0,Jn,Qn,Jn,rr,-1,ir,Qn,-1,lr,rr],dr=[0,Qn,-2],gr=class extends nn{constructor(){super()}},pr=[0],mr=[0,Wn,Jn,-2],yr=class extends nn{constructor(t){super(t,2)}},vr={},br=[-2,vr,Jn];vr[336783863]=[0,Qn,Jn,-1,Wn,[0,[1,2,3,4,5],er,pr,er,fr,er,dr,er,mr,er,cr],ur];var wr=[0,Yn,Kn],_r=[0,$n,-1,Kn,-3,$n,Hn,Yn,qn,$n,-1,Kn,qn,Kn,-2,Yn],Ar=[-1,{}],Sr=[0,Qn,1,Ar],Er=[0,Qn,Xn,Ar];function Tr(t){tn(t,3,"TEXT:text_in")}var xr=class extends nn{constructor(t){super(t,500)}s(t){return Je(this,0,7,t)}};xr.A=[3,4,5,6,8,13,17,1005];var Ir=[-500,Yn,-1,Xn,-3,br,Mn,ar,qn,-1,Sr,Er,Mn,wr,Yn,_r,qn,Xn,987,Xn],Pr=[0,Yn,-1,Ar],Or=[-500,Qn,-1,[-1,{}],998,Qn],Lr=[-500,Qn,Xn,-1,[-2,{},Jn],997,Xn,-1],Br=[-500,Qn,Xn,Ar,998,Xn];function Fr(t){tn(t,10,"text_in")}var jr,kr=class extends nn{constructor(){super(void 0,500)}s(t){return Je(this,0,1001,t)}};kr.A=[1,6,7,9,10,15,16,17,14,1002],kr.prototype.g=(jr=[-500,Mn,Ir,4,Mn,Or,Mn,Lr,qn,Mn,Br,Xn,qn,Sr,Er,Mn,Pr,Xn,-2,_r,Yn,-1,Kn,979,Ar,Mn,ar],function(){const t=new class{constructor(){this.j=[],this.i=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const t=this.g;return this.g=[],t}}}};On(this.l,t,Sn(jr)),Pt(t,t.g.end());const e=new Uint8Array(t.i),n=t.j,r=n.length;let i=0;for(let t=0;t<r;t++){const r=n[t];e.set(r,i),i+=r.length}return t.j=[e],e});var Ur=class extends nn{constructor(t){super(t)}},Vr=[0,Wn,Gn,Qn,-1],Cr=class extends nn{constructor(t){super(t)}g(){return qe(this,Ur)}};Cr.A=[1];var Nr=class extends nn{constructor(t){super(t)}},Mr=[0,1,Wn,Qn,[0,Mn,Vr]],Gr=class extends nn{constructor(t){super(t)}};Gr.A=[1];var Dr=sr(Gr,[0,Mn,Mr,zn]),zr=class extends nn{constructor(t){super(t)}};zr.A=[1];var $r=class extends nn{constructor(t){super(t)}N(){const t=Ve(this);return null==t?V():t}},Rr=class extends nn{constructor(t){super(t)}},Wr=[1,2],Hr=[0,Wr,er,[0,Dn],er,[0,nr],Wn,Qn],qr=class extends nn{constructor(t){super(t)}};qr.A=[1];var Jr=sr(qr,[0,Mn,Hr,zn]),Kr=class extends nn{constructor(t){super(t)}};Kr.A=[4,5];var Xr=class extends nn{constructor(t){super(t)}},Yr=[0,Jn,-1],Qr=class extends nn{constructor(t){super(t)}},Zr=[1,2,3,4,5],ti=class extends nn{constructor(t){super(t)}g(){return null!=Ve(this)}i(){return null!=me(Be(this,2))}},ei=class extends nn{constructor(t){super(t)}},ni=[0,[0,nr,Qn,[0,Wn,zn,-1],[0,Rn,zn]],Jn,[0,Zr,er,mr,er,fr,er,cr,er,pr,er,dr],rr],ri=class extends nn{constructor(t){super(t)}},ii=new or(462704549,ri);vr[462704549]=[0,ni,[0,Qn,Wn,Gn,Xn,-1]];var oi=class extends nn{constructor(t){super(t)}},si=new or(477589892,oi);function ai(e,n){if(n=n?Ie(n):new Kr,void 0!==e.displayNamesLocale?je(n,1,pe(e.displayNamesLocale)):void 0===e.displayNamesLocale&&je(n,1),void 0!==e.maxResults){var r=e.maxResults;if(null!=r){if("number"!=typeof r)throw se(e=Error("int32"),"warning"),e;if(!Number.isFinite(r)){const e=Error();se(e,"incident"),function(e){t.setTimeout((()=>{throw e}),0)}(e)}}je(n,2,r)}else"maxResults"in e&&je(n,2);if(void 0!==e.scoreThreshold){if(null!=(r=e.scoreThreshold)&&"number"!=typeof r)throw Error(`Value of float/double field must be a number, found ${typeof r}: ${r}`);je(n,3,r)}else"scoreThreshold"in e&&je(n,3);return void 0!==e.categoryAllowlist?Ce(n,4,e.categoryAllowlist):"categoryAllowlist"in e&&je(n,4),void 0!==e.categoryDenylist?Ce(n,5,e.categoryDenylist):"categoryDenylist"in e&&je(n,5),n}function ui(t){const e={classifications:qe(t,Nr).map((t=>function(t,e=-1,n=""){return{categories:t.map((t=>{var e=he(Be(t,1))??0??-1;const n=t.l;let r=Dt(n);const i=Fe(n,r,2),o=ae(i);return null!=o&&o!==i&&ke(n,r,2,o),{index:e,score:o??0??0,categoryName:me(Be(t,3))??""??"",displayName:me(Be(t,4))??""??""}})),headIndex:e,headName:n}}(We(t,Cr,4)?.g()??[],he(Be(t,2))??0,me(Be(t,3))??"")))};return null!=Qe(t)&&(e.timestampMs=Ze(Qe(t))),e}function ci(t){return Array.from(t,(t=>127<t?t-256:t))}function li(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let o=0;o<t.length;o++)n+=t[o]*e[o],r+=t[o]*t[o],i+=e[o]*e[o];if(0>=r||0>=i)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let hi;vr[477589892]=[0,ni,Yr];const fi=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function di(){if(void 0===hi)try{await WebAssembly.instantiate(fi),hi=!0}catch{hi=!1}return hi}async function gi(t,e=""){const n=await di()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var pi=class{};async function mi(t){if("function"!=typeof importScripts){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise(((t,n)=>{e.addEventListener("load",(()=>{t()}),!1),e.addEventListener("error",(t=>{n(t)}),!1),document.body.appendChild(e)}))}importScripts(t.toString())}pi.forVisionTasks=function(t){return gi("vision",t)},pi.forTextTasks=function(t){return gi("text",t)},pi.forAudioTasks=function(t){return gi("audio",t)},pi.isSimdSupported=function(){return di()};function yi(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.h.stringToNewUTF8(e)),t.h._free(e)}function vi(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.h.stringToNewUTF8(e[n]);e=t.h._malloc(4*r.length),t.h.HEAPU32.set(r,e>>2),n(e);for(const e of r)t.h._free(e);t.h._free(e)}function bi(t,e,n){t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=n}function wi(t,e,n){let r=[];t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=(t,e,i)=>{e?(n(r,i),r=[]):r.push(t)}}const _i=function(t){return class extends t{U(){this.h._registerModelResourcesGraphService()}}}(class{constructor(t,e){this.j=!0,this.h=t,this.g=null,this.i=0,this.m="function"==typeof this.h._addIntToInputStream,void 0!==e?this.h.canvas=e:((t="undefined"==typeof OffscreenCanvas)||(t=(t=navigator.userAgent).includes("Safari")&&!t.includes("Chrome")),t?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.h.canvas=document.createElement("canvas")):this.h.canvas=new OffscreenCanvas(1,1))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph((new TextEncoder).encode(t),!1)}setGraph(t,e){const n=t.length,r=this.h._malloc(n);this.h.HEAPU8.set(t,r),e?this.h._changeBinaryGraph(n,r):this.h._changeTextGraph(n,r),this.h._free(r)}configureAudio(t,e,n,r,i){this.h._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),yi(this,r||"input_audio",(r=>{yi(this,i=i||"audio_header",(i=>{this.h._configureAudio(r,i,t,e,n)}))}))}setAutoResizeCanvas(t){this.j=t}setAutoRenderToScreen(t){this.h._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.h.gpuOriginForWebTexturesIsBottomLeft=t}attachErrorListener(t){this.h.errorListener=t}attachEmptyPacketListener(t,e){this.h.emptyPacketListeners=this.h.emptyPacketListeners||{},this.h.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const o=4*t.length;this.i!==o&&(this.g&&this.h._free(this.g),this.g=this.h._malloc(o),this.i=o),this.h.HEAPF32.set(t,this.g/4),yi(this,r,(t=>{this.h._addAudioToInputStream(this.g,e,n,t,i)}))}addGpuBufferToStream(t,e,n){yi(this,e,(e=>{if(!this.h.canvas)throw Error("No OpenGL canvas configured.");e?this.h._bindTextureToStream(e):this.h._bindTextureToCanvas();var r=this.h.canvas.getContext("webgl2")||this.h.canvas.getContext("webgl");if(!r)throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let i;this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),t.videoWidth?(r=t.videoWidth,i=t.videoHeight):t.naturalWidth?(r=t.naturalWidth,i=t.naturalHeight):(r=t.width,i=t.height),!this.j||r===this.h.canvas.width&&i===this.h.canvas.height||(this.h.canvas.width=r,this.h.canvas.height=i);const[o,s]=[r,i];this.h._addBoundTextureToStream(e,o,s,n)}))}addBoolToStream(t,e,n){yi(this,e,(e=>{this.h._addBoolToInputStream(t,e,n)}))}addDoubleToStream(t,e,n){yi(this,e,(e=>{this.h._addDoubleToInputStream(t,e,n)}))}addFloatToStream(t,e,n){yi(this,e,(e=>{this.h._addFloatToInputStream(t,e,n)}))}addIntToStream(t,e,n){yi(this,e,(e=>{this.h._addIntToInputStream(t,e,n)}))}addStringToStream(t,e,n){yi(this,e,(e=>{yi(this,t,(t=>{this.h._addStringToInputStream(t,e,n)}))}))}addStringRecordToStream(t,e,n){yi(this,e,(e=>{vi(this,Object.keys(t),(r=>{vi(this,Object.values(t),(i=>{this.h._addFlatHashMapToInputStream(r,i,Object.keys(t).length,e,n)}))}))}))}addProtoToStream(t,e,n,r){yi(this,n,(n=>{yi(this,e,(e=>{const i=this.h._malloc(t.length);this.h.HEAPU8.set(t,i),this.h._addProtoToInputStream(i,t.length,e,n,r),this.h._free(i)}))}))}addEmptyPacketToStream(t,e){yi(this,t,(t=>{this.h._addEmptyPacketToInputStream(t,e)}))}addBoolVectorToStream(t,e,n){yi(this,e,(e=>{const r=this.h._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(r,e);this.h._addBoolVectorToInputStream(r,e,n)}))}addDoubleVectorToStream(t,e,n){yi(this,e,(e=>{const r=this.h._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(r,e);this.h._addDoubleVectorToInputStream(r,e,n)}))}addFloatVectorToStream(t,e,n){yi(this,e,(e=>{const r=this.h._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(r,e);this.h._addFloatVectorToInputStream(r,e,n)}))}addIntVectorToStream(t,e,n){yi(this,e,(e=>{const r=this.h._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(r,e);this.h._addIntVectorToInputStream(r,e,n)}))}addStringVectorToStream(t,e,n){yi(this,e,(e=>{const r=this.h._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const e of t)yi(this,e,(t=>{this.h._addStringVectorEntry(r,t)}));this.h._addStringVectorToInputStream(r,e,n)}))}addBoolToInputSidePacket(t,e){yi(this,e,(e=>{this.h._addBoolToInputSidePacket(t,e)}))}addDoubleToInputSidePacket(t,e){yi(this,e,(e=>{this.h._addDoubleToInputSidePacket(t,e)}))}addFloatToInputSidePacket(t,e){yi(this,e,(e=>{this.h._addFloatToInputSidePacket(t,e)}))}addIntToInputSidePacket(t,e){yi(this,e,(e=>{this.h._addIntToInputSidePacket(t,e)}))}addStringToInputSidePacket(t,e){yi(this,e,(e=>{yi(this,t,(t=>{this.h._addStringToInputSidePacket(t,e)}))}))}addProtoToInputSidePacket(t,e,n){yi(this,n,(n=>{yi(this,e,(e=>{const r=this.h._malloc(t.length);this.h.HEAPU8.set(t,r),this.h._addProtoToInputSidePacket(r,t.length,e,n),this.h._free(r)}))}))}addBoolVectorToInputSidePacket(t,e){yi(this,e,(e=>{const n=this.h._allocateBoolVector(t.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(n,e);this.h._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(t,e){yi(this,e,(e=>{const n=this.h._allocateDoubleVector(t.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(n,e);this.h._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(t,e){yi(this,e,(e=>{const n=this.h._allocateFloatVector(t.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(n,e);this.h._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(t,e){yi(this,e,(e=>{const n=this.h._allocateIntVector(t.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(n,e);this.h._addIntVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(t,e){yi(this,e,(e=>{const n=this.h._allocateStringVector(t.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const e of t)yi(this,e,(t=>{this.h._addStringVectorEntry(n,t)}));this.h._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(t,e){bi(this,t,e),yi(this,t,(t=>{this.h._attachBoolListener(t)}))}attachBoolVectorListener(t,e){wi(this,t,e),yi(this,t,(t=>{this.h._attachBoolVectorListener(t)}))}attachIntListener(t,e){bi(this,t,e),yi(this,t,(t=>{this.h._attachIntListener(t)}))}attachIntVectorListener(t,e){wi(this,t,e),yi(this,t,(t=>{this.h._attachIntVectorListener(t)}))}attachDoubleListener(t,e){bi(this,t,e),yi(this,t,(t=>{this.h._attachDoubleListener(t)}))}attachDoubleVectorListener(t,e){wi(this,t,e),yi(this,t,(t=>{this.h._attachDoubleVectorListener(t)}))}attachFloatListener(t,e){bi(this,t,e),yi(this,t,(t=>{this.h._attachFloatListener(t)}))}attachFloatVectorListener(t,e){wi(this,t,e),yi(this,t,(t=>{this.h._attachFloatVectorListener(t)}))}attachStringListener(t,e){bi(this,t,e),yi(this,t,(t=>{this.h._attachStringListener(t)}))}attachStringVectorListener(t,e){wi(this,t,e),yi(this,t,(t=>{this.h._attachStringVectorListener(t)}))}attachProtoListener(t,e,n){bi(this,t,e),yi(this,t,(t=>{this.h._attachProtoListener(t,n||!1)}))}attachProtoVectorListener(t,e,n){wi(this,t,e),yi(this,t,(t=>{this.h._attachProtoVectorListener(t,n||!1)}))}attachAudioListener(t,e,n){this.h._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),bi(this,t,((t,n)=>{t=new Float32Array(t.buffer,t.byteOffset,t.length/4),e(t,n)})),yi(this,t,(t=>{this.h._attachAudioListener(t,n||!1)}))}finishProcessing(){this.h._waitUntilIdle()}closeGraph(){this.h._closeGraph(),this.h.simpleListeners=void 0,this.h.emptyPacketListeners=void 0}});var Ai=class extends _i{};async function Si(t,e,n){return t=await(async(t,e,n,r)=>{if(e&&await mi(e),!self.ModuleFactory)throw Error("ModuleFactory not set.");if(n&&(await mi(n),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&r&&((e=self.Module).locateFile=r.locateFile,r.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=r.mainScriptUrlOrBlob)),r=await self.ModuleFactory(self.Module||r),self.ModuleFactory=self.Module=void 0,new t(r,null)})(t,e.wasmLoaderPath,e.assetLoaderPath,{locateFile:t=>t.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&t.endsWith(".data")?e.assetBinaryPath.toString():t}),await t.s(n),t}async function Ei(t,e,n){return Si(t,e,n)}function Ti(t,e){const n=We(t.baseOptions,ti,1)||new ti;"string"==typeof e?(je(n,2,pe(e)),je(n,1)):e instanceof Uint8Array&&(je(n,1,Qt(e,!1,!1)),je(n,2)),Je(t.baseOptions,0,1,n)}function xi(t,e){const n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(We(t.baseOptions,ti,1)?.g()||We(t.baseOptions,ti,1)?.i()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return function(t,e){let n=We(t.baseOptions,Qr,3);if(!n){var r=n=new Qr;Ke(r,4,new gr)}"delegate"in e&&("GPU"===e.delegate?Ke(e=n,2,r=new hr):Ke(e=n,4,r=new gr)),Je(t.baseOptions,0,3,n)}(t,n),n.modelAssetPath?fetch(n.modelAssetPath.toString()).then((t=>{if(t.ok)return t.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${t.status})`)})).then((e=>{try{t.g.h.FS_unlink("/model.dat")}catch{}t.g.h.FS_createDataFile("/","model.dat",new Uint8Array(e),!0,!1,!1),Ti(t,"/model.dat"),t.v()})):(Ti(t,n.modelAssetBuffer),t.v(),Promise.resolve())}function Ii(t){try{const e=t.m.length;if(1===e)throw Error(t.m[0].message);if(1<e)throw Error("Encountered multiple errors: "+t.m.map((t=>t.message)).join(", "))}finally{t.m=[]}}function Pi(t,e){t.j=Math.max(t.j,e)}var Oi=class{constructor(t){this.g=t,this.m=[],this.j=0,this.g.setAutoRenderToScreen(!1)}setGraph(t,e){this.g.attachErrorListener(((t,e)=>{this.m.push(Error(e))})),this.g.U(),this.g.setGraph(t,e),Ii(this)}finishProcessing(){this.g.finishProcessing(),Ii(this)}close(){this.g.closeGraph()}};Oi.prototype.close=Oi.prototype.close;var Li=class extends Oi{constructor(t,e){super(new Ai(t,e)),this.o={languages:[]},this.i=new ri,t=new ei,Je(this.i,0,1,t)}s(t){var e=ai(t,We(this.i,Kr,2));return Je(this.i,0,2,e),xi(this,t)}get baseOptions(){return We(this.i,ei,1)}set baseOptions(t){Je(this.i,0,1,t)}R(t){return this.o={languages:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.o}v(){var t=new kr;Fr(t),tn(t,15,"classifications_out");const e=new yr;en(e,ii,this.i);const n=new xr;Ne(n,pe("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),Tr(n),tn(n,4,"CLASSIFICATIONS:classifications_out"),n.s(e),Ye(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{if(({classifications:t}=ui(Dr(t))),1!==t.length)throw Error(`Expected 1 classification head, got ${t.length}`);this.o.languages=t[0].categories.map((t=>({languageCode:t.categoryName,probability:t.score}))),Pi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{Pi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Li.prototype.detect=Li.prototype.R,Li.prototype.setOptions=Li.prototype.s,Li.createFromModelPath=function(t,e){return Ei(Li,t,{baseOptions:{modelAssetPath:e}})},Li.createFromModelBuffer=function(t,e){return Ei(Li,t,{baseOptions:{modelAssetBuffer:e}})},Li.createFromOptions=function(t,e){return Ei(Li,t,e)};var Bi=class extends Oi{constructor(t,e){super(new Ai(t,e)),this.o={classifications:[]},this.i=new ri,t=new ei,Je(this.i,0,1,t)}s(t){var e=ai(t,We(this.i,Kr,2));return Je(this.i,0,2,e),xi(this,t)}get baseOptions(){return We(this.i,ei,1)}set baseOptions(t){Je(this.i,0,1,t)}P(t){return this.o={classifications:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.o}v(){var t=new kr;Fr(t),tn(t,15,"classifications_out");const e=new yr;en(e,ii,this.i);const n=new xr;Ne(n,pe("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),Tr(n),tn(n,4,"CLASSIFICATIONS:classifications_out"),n.s(e),Ye(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{this.o=ui(Dr(t)),Pi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{Pi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Bi.prototype.classify=Bi.prototype.P,Bi.prototype.setOptions=Bi.prototype.s,Bi.createFromModelPath=function(t,e){return Ei(Bi,t,{baseOptions:{modelAssetPath:e}})},Bi.createFromModelBuffer=function(t,e){return Ei(Bi,t,{baseOptions:{modelAssetBuffer:e}})},Bi.createFromOptions=function(t,e){return Ei(Bi,t,e)};var Fi=class extends Oi{constructor(t,e){super(new Ai(t,e)),this.o={embeddings:[]},this.i=new oi,t=new ei,Je(this.i,0,1,t)}s(t){var e=this.i,n=We(this.i,Xr,2);return n=n?Ie(n):new Xr,void 0!==t.l2Normalize?je(n,1,ue(t.l2Normalize)):"l2Normalize"in t&&je(n,1),void 0!==t.quantize?je(n,2,ue(t.quantize)):"quantize"in t&&je(n,2),Je(e,0,2,n),xi(this,t)}get baseOptions(){return We(this.i,ei,1)}set baseOptions(t){Je(this.i,0,1,t)}S(t){return this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.o}v(){var t=new kr;Fr(t),tn(t,15,"embeddings_out");const e=new yr;en(e,si,this.i);const n=new xr;Ne(n,pe("mediapipe.tasks.text.text_embedder.TextEmbedderGraph")),Tr(n),tn(n,4,"EMBEDDINGS:embeddings_out"),n.s(e),Ye(t,n),this.g.attachProtoListener("embeddings_out",((t,e)=>{t=Jr(t),this.o=function(t){return{embeddings:qe(t,Rr).map((t=>{const e={headIndex:he(Be(t,3))??0??-1,headName:me(Be(t,4))??""??""};if(void 0!==Re(t,zr,De(t,1))){var n=2,r=void 0;t=We(t,zr,De(t,1)).l;let s=Dt(t);2&s&&(n=1);let a=Ue(t,s,1,1|((r=!!r)?2:0));s=Dt(t);var i=Gt(a);let u=i,c=!!(2&i);var o=c&&!!(4&i);if(!(4&i)){Object.isFrozen(a)&&(a=kt(a),u=0,c=!!(2&(i=Xe(i,s,r))),s=ke(t,s,1,a)),i=Mt(i,4,!1),i=Mt(i,4096,!1),i=Mt(i,8192,!1);let e=0,n=0;for(;e<a.length;e++){const t=ae(a[e]);null!=t&&(a[n++]=t)}n<e&&(a.length=n),i=Mt(i,20,!0)}o||((o=1===n)&&(i=Mt(i,2,!0)),i!==u&&zt(a,i),(o||c)&&Object.freeze(a)),2===n&&c&&(a=kt(a),i=Xe(i,s,r),zt(a,i),ke(t,s,1,a)),e.floatEmbedding=a}else n=new Uint8Array(0),e.quantizedEmbedding=We(t,$r,De(t,2))?.N()?.O()??n;return e})),timestampMs:Ze(Qe(t))}}(t),Pi(this,e)})),this.g.attachEmptyPacketListener("embeddings_out",(t=>{Pi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Fi.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=li(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=li(ci(t.quantizedEmbedding),ci(e.quantizedEmbedding))}return t},Fi.prototype.embed=Fi.prototype.S,Fi.prototype.setOptions=Fi.prototype.s,Fi.createFromModelPath=function(t,e){return Ei(Fi,t,{baseOptions:{modelAssetPath:e}})},Fi.createFromModelBuffer=function(t,e){return Ei(Fi,t,{baseOptions:{modelAssetBuffer:e}})},Fi.createFromOptions=function(t,e){return Ei(Fi,t,e)},exports.FilesetResolver=pi,exports.LanguageDetector=Li,exports.TaskRunner=Oi,exports.TextClassifier=Bi,exports.TextEmbedder=Fi;
//# sourceMappingURL=text_bundle_cjs.js.map
